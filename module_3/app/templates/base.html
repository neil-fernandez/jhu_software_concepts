<!-- This is the html base template to render child blocks-->

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>{% block title %} {% endblock title %}- Grad School Cafe Data Analysis</title>
    <!--Declare style sheet from static URL-->
    <link rel="stylesheet" href="{{ url_for('static', filename='main.css') }}">
</head>
<body>
    <nav class="nav">
        <a href="{{ url_for('index') }}">Grad School Cafe Data Analysis</a>
        <!--Nav bar with Pull Data and Update Analysis buttons-->
        <div class="nav-actions">
            <!--Pull data-->
            <form action="{{ url_for('pull_data') }}" method="post" id="pull-data-form">
                <button class="nav-button" type="submit" id="pull-data-button"
                    title="Fetches new Grad Cafe entries and loads them into the database.">Pull Data</button>
            </form>
            <!--Update analysis-->
            <form action="{{ url_for('index') }}" method="get">
                <button class="nav-button" type="submit" id="update-analysis-button"
                    title="Refreshes the analysis with the latest data.">Update Analysis</button>
            </form>
        </div>
    </nav>
    <hr>
    <div class="content"></div>
             <!--Display hint or extend with child template block-->
            {% block content %} {% endblock content %}
    </div>
    <!--listener to disable buttons while pulling data, wait until HTML fully loaded -->
    <script>
        document.addEventListener("DOMContentLoaded", function () {
            <!-- grab the pull data form, update analysis button and pull data button -->
            var pullForm = document.getElementById("pull-data-form");
            var updateButton = document.getElementById("update-analysis-button");
            var pullButton = document.getElementById("pull-data-button");

             <!-- stop of form or button not found -->
            if (!pullForm || !updateButton) {
                return;
            }
            <!--run when pull data form is submitted, disabling update and pull button -->
            pullForm.addEventListener("submit", function () {
                updateButton.disabled = true;
                updateButton.classList.add("is-disabled");
                updateButton.setAttribute("aria-disabled", "true");

                if (pullButton) {
                    pullButton.disabled = true;
                    pullButton.classList.add("is-disabled");
                }
            });
        });
    </script>
</body>
</html>